
# py-face-sample

顔認証ライブラリFace Recognitionの動作確認

https://github.com/ageitgey/face_recognition

下記のブログのプログラムを利用

https://pystyle.info/perform-face-recognition-with-python/


# 利用方法

 - Python3
 - venvの知識を前提とします
   - https://qiita.com/fiftystorm36/items/b2fd47cf32c7694adc2e

## 環境構築

```
python -m venv venv
. ./venv/bin/activate
pip install face_recognition
```

パッケージインストールで `CMake must be installed to build dlib` でエラーになる場合は以下を実行

```
brew install cmake
```

## 実行

```
python main.py
```

# FAQ
## 画像に2人以上写っていた場合

各関数、顔の数の長さの配列で返されるので問題なし。ただし、画像中の顔と特徴量を一致させたい場合は、領域抽出を行ってから特徴量抽出を行うなど工夫が必要。

## 処理速度

 - HOGモード(精度中): 4枚で0.4秒
 - CNNモード(精度高): 4枚で5秒

```
% python main.py
画像読み込み完了 経過時間: 0.01854681968688965
特徴量抽出完了 経過時間: 0.341400146484375
判定完了 経過時間: 9.799003601074219e-05
known-face_01.jpg: True
known-face_02.jpg: False
known-face_03.jpg: False
```

## 特徴量の実体

HOGもCNNも同じ128次元

```
[-0.09754212  0.10738385  0.00525861 -0.07757703  0.01866326 -0.01174597
 -0.07564981 -0.09087636  0.19477473 -0.10454637  0.25120273  0.08791724
 -0.21323723 -0.15268493  0.05110382  0.11860768 -0.17933065 -0.0756311
 -0.11382154 -0.1288749   0.02258718  0.00279848  0.10217901  0.03237748
 -0.13393074 -0.35403958 -0.0580064  -0.1828717  -0.00989457 -0.10505973
 -0.07026147  0.00693022 -0.18452275 -0.1120454   0.02282822 -0.01020449
  0.00406139  0.01357604  0.20237175  0.03512857 -0.10993997  0.0870616
  0.01756904  0.22714214  0.28190488  0.08315435  0.00194862 -0.09594566
  0.1032655  -0.22206959  0.07337446  0.14215639  0.0722515   0.02353335
  0.1005879  -0.17919475 -0.01241377  0.08792022 -0.15160109  0.01202202
  0.01402237 -0.06727821 -0.0630758   0.03675457  0.2203823   0.11459351
 -0.13095421 -0.04992203  0.14960743 -0.03172029  0.01850963  0.01357304
 -0.18599948 -0.20324214 -0.22836761  0.09265995  0.36891651  0.18307278
 -0.19349967  0.01820637 -0.20466249  0.02919239  0.06904326  0.00472026
 -0.07737924 -0.12434529 -0.02294984  0.0630012   0.08312577  0.04073889
 -0.05303941  0.2139142  -0.02968272  0.0561411   0.01063286  0.03990538
 -0.15023923 -0.02285283 -0.17562102 -0.07264334  0.03232066 -0.03121309
  0.05018635  0.14780098 -0.22680336  0.05958851  0.00734062 -0.04299376
  0.03576483  0.0797652  -0.02922893 -0.05023423  0.05787362 -0.23752038
  0.2524915   0.24048904  0.0365964   0.1761142   0.07581956  0.02088013
 -0.00284522 -0.01932937 -0.17980283 -0.05121418  0.05107957  0.07936693
  0.08825274  0.00680562]
```
